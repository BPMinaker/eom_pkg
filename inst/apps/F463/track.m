function track()

global params;

% x y z 
params.course=[
    0.0000    0.0000    0.0000
    4.9990   -0.0060   -0.0194
    9.9990   -0.0141   -0.0393
   14.9990   -0.0243   -0.0588
   19.9990   -0.0356   -0.0783
   24.9989   -0.0491   -0.0973
   29.9989   -0.0643   -0.1349
   34.9989   -0.0812   -0.1876
   39.9989   -0.0999   -0.2454
   44.9988   -0.1209   -0.3016
   49.9988   -0.1450   -0.3560
   54.9987   -0.1715   -0.4200
   59.9986   -0.2011   -0.4994
   64.9985   -0.2351   -0.5885
   69.9983   -0.2733   -0.6785
   74.9982   -0.3172   -0.7671
   79.9979   -0.3683   -0.8570
   84.9975   -0.4298   -0.9572
   89.9969   -0.5079   -1.0761
   94.9957   -0.6185   -1.1944
   99.9940   -0.7556   -1.3112
  104.9937   -0.8404   -1.4277
  109.9932   -0.8363   -1.5541
  114.9928   -0.7268   -1.6926
  119.9883   -0.5180   -1.8359
  124.9796   -0.2123   -1.9790
  129.9629    0.1940   -2.1210
  134.9375    0.7043   -2.2651
  139.8992    1.3202   -2.4199
  144.8473    2.0438   -2.5849
  149.7773    2.8765   -2.7502
  154.6879    3.8202   -2.9129
  159.5753    4.8759   -3.0763
  164.4366    6.0452   -3.2469
  169.2695    7.3292   -3.4272
  174.0697    8.7284   -3.6085
  178.8347   10.2436   -3.7876
  183.5612   11.8757   -3.9669
  188.2452   13.6250   -4.1526
  192.8838   15.4915   -4.3435
  197.4741   17.4744   -4.5352
  202.0129   19.5722   -4.7274
  206.4966   21.7848   -4.9183
  210.9233   24.1096   -5.1131
  215.2904   26.5443   -5.3120
  219.5964   29.0857   -5.5109
  223.8413   31.7278   -5.7101
  228.0294   34.4593   -5.9091
  232.1516   37.2893   -6.1094
  236.1830   40.2467   -6.3106
  240.1142   43.3368   -6.5121
  243.9472   46.5480   -6.7139
  247.6804   49.8741   -6.9155
  251.3106   53.3124   -7.1159
  254.8336   56.8611   -7.3149
  258.2431   60.5187   -7.5136
  261.5327   64.2840   -7.7131
  264.6939   68.1581   -7.9112
  267.7151   72.1430   -8.1049
  270.5823   76.2394   -8.2958
  273.2786   80.4500   -8.4862
  275.7837   84.7776   -8.6773
  278.0734   89.2237   -8.8661
  280.1154   93.7882   -9.0449
  281.8721   98.4694   -9.2203
  283.2994  103.2612   -9.3980
  284.3444  108.1512   -9.5737
  284.9471  113.1163   -9.7407
  285.0452  118.1171   -9.8969
  284.5803  123.0967  -10.0526
  283.5075  127.9808  -10.2098
  281.8342  132.6949  -10.3584
  279.4898  137.1136  -10.4924
  276.3172  140.9714  -10.6184
  272.3056  143.9653  -10.7478
  267.7265  145.9959  -10.8758
  262.8600  147.1609  -10.9757
  257.8840  147.6429  -11.0664
  252.8838  147.6130  -11.1622
  247.8983  147.2006  -11.2520
  242.9467  146.5000  -11.3149
  238.0323  145.5799  -11.3637
  233.1512  144.4920  -11.4113
  228.3010  143.2769  -11.4573
  223.4761  141.9652  -11.4768
  218.6704  140.5843  -11.4667
  213.8777  139.1594  -11.4634
  209.0913  137.7135  -11.4507
  204.3043  136.2696  -11.3970
  199.5088  134.8541  -11.3259
  194.6956  133.4999  -11.2541
  189.8541  132.2489  -11.1782
  184.9734  131.1617  -11.0885
  180.0427  130.3331  -10.9912
  175.0584  129.9412  -10.8946
  170.0734  130.3193  -10.8023
  165.4994  132.2650  -10.7308
  161.8862  135.7116  -10.6582
  158.7210  139.6044  -10.5879
  155.7901  143.6749  -10.5246
  152.9068  147.7605  -10.4718
  150.1196  151.9143  -10.4262
  147.5668  156.2144  -10.3833
  145.3335  160.6920  -10.3464
  143.4993  165.3498  -10.3199
  142.2396  170.1864  -10.2928
  141.7809  175.1655  -10.2704
  142.3524  180.1350  -10.2656
  144.0302  184.8465  -10.2598
  146.6279  189.1203  -10.2550
  149.8379  192.9554  -10.2621
  153.3994  196.4657  -10.2757
  157.1313  199.7932  -10.2894
  160.9065  203.0718  -10.3099
  164.6186  206.4223  -10.3399
  168.1592  209.9536  -10.3707
  171.4029  213.7586  -10.4052
  174.2038  217.8995  -10.4495
  176.4110  222.3871  -10.4958
  177.9119  227.1644  -10.5418
  178.6770  232.1092  -10.5991
  178.7106  237.1038  -10.6593
  178.2145  242.0868  -10.7189
  177.5196  247.0375  -10.7842
  176.7632  251.9809  -10.8546
  176.0360  256.9277  -10.9280
  175.3712  261.8834  -11.0031
  174.7336  266.8427  -11.0800
  174.0912  271.8013  -11.1589
  173.4330  276.7578  -11.2395
  172.7481  281.7108  -11.3217
  172.0089  286.6558  -11.4049
  171.1810  291.5875  -11.4889
  170.2235  296.4946  -11.5736
  169.0854  301.3652  -11.6574
  167.7059  306.1717  -11.7378
  166.0203  310.8784  -11.8238
  163.9672  315.4426  -11.9056
  161.5093  319.7978  -11.9307
  158.6422  323.8927  -11.9217
  155.3905  327.6982  -11.9146
  151.8172  331.1970  -11.9117
  147.9843  334.4073  -11.9128
  143.9446  337.3613  -11.9176
  139.7552  340.0882  -11.9259
  135.4442  342.6274  -11.9374
  131.0469  345.0053  -11.9520
  126.5774  347.2511  -11.9694
  122.0553  349.3838  -11.9894
  117.4895  351.4233  -12.0117
  112.8886  353.3829  -12.0361
  108.2609  355.2751  -12.0624
  103.6092  357.1101  -12.0903
   98.9384  358.8954  -12.1196
   94.2522  360.6383  -12.1501
   89.5523  362.3451  -12.1815
   84.8411  364.0206  -12.2136
   80.1210  365.6697  -12.2462
   75.3927  367.2957  -12.2790
   70.6567  368.8993  -12.3119
   65.9134  370.4811  -12.3445
   61.1632  372.0417  -12.3766
   56.4076  373.5857  -12.4081
   51.6491  375.1212  -12.4386
   46.8906  376.6563  -12.4679
   42.1347  378.1994  -12.4959
   37.3839  379.7587  -12.5222
   32.6413  381.3425  -12.5467
   27.9099  382.9589  -12.5691
   23.1910  384.6118  -12.5892
   18.4827  386.2953  -12.6067
   13.7829  388.0019  -12.6214
    9.0895  389.7257  -12.6330
    4.4013  391.4640  -12.6414
   -0.2821  393.2149  -12.6464
   -4.9615  394.9766  -12.6477
   -9.6377  396.7467  -12.6467
  -14.3116  398.5228  -12.6453
  -18.9842  400.3023  -12.6453
  -23.6563  402.0831  -12.6486
  -28.3286  403.8634  -12.6574
  -33.0019  405.6413  -12.6712
  -37.6767  407.4151  -12.6935
  -42.3539  409.1826  -12.7210
  -47.0342  410.9418  -12.7489
  -51.7184  412.6905  -12.7773
  -56.4073  414.4268  -12.7997
  -61.1017  416.1482  -12.8163
  -65.8021  417.8528  -12.8278
  -70.5096  419.5381  -12.8346
  -75.2249  421.2017  -12.8374
  -79.9486  422.8408  -12.8367
  -84.6816  424.4527  -12.8330
  -89.4252  426.0343  -12.8269
  -94.1799  427.5817  -12.8189
  -98.9465  429.0909  -12.8095
 -103.7268  430.5580  -12.7993
 -108.5215  431.9777  -12.7889
 -113.3306  433.3448  -12.7788
 -118.1569  434.6536  -12.7695
 -123.0010  435.8961  -12.7616
 -127.8621  437.0640  -12.7385
 -132.7443  438.1484  -12.7178
 -137.6470  439.1367  -12.7001
 -142.5681  440.0157  -12.6860
 -147.5139  440.7693  -12.6750
 -152.4776  441.3751  -12.6662
 -157.4596  441.8100  -12.6580
 -162.4591  442.0403  -12.6489
 -167.4569  442.0279  -12.6371
 -172.4575  441.7211  -12.6238
 -177.4089  441.0577  -12.6287
 -182.3035  439.9544  -12.6359
 -187.0246  438.3267  -12.6400
 -191.5152  436.0725  -12.6402
 -195.5738  433.1547  -12.6405
 -199.0648  429.5598  -12.6417
 -201.8377  425.3883  -12.6428
 -203.9991  420.8720  -12.6438
 -205.7228  416.1710  -12.6450
 -207.1530  411.3793  -12.6462
 -208.3042  406.5129  -12.6474
 -209.1058  401.5742  -12.6486
 -209.5299  396.5924  -12.6499
 -209.5465  391.5925  -12.6512
 -209.1197  386.6081  -12.6525
 -208.2234  381.6866  -12.6539
 -206.8357  376.8826  -12.6554
 -204.9437  372.2545  -12.6566
 -202.5463  367.8669  -12.6586
 -199.6566  363.7864  -12.6584
 -196.3030  360.0774  -12.6646
 -192.5254  356.8010  -12.6538
 -188.3760  354.0099  -12.5911
 -183.9168  351.7458  -12.6037
 -179.2162  350.0375  -12.6117
 -174.3452  348.9038  -12.6201
 -169.3755  348.3469  -12.6292
 -164.3751  348.3585  -12.6382
 -159.4062  348.9160  -12.6476
 -154.5262  350.0020  -12.6571
 -149.7684  351.5416  -12.6763
 -145.1310  353.4217  -12.6956
 -140.6243  355.5864  -12.7150
 -136.2652  358.0364  -12.7347
 -132.0880  360.7891  -12.7551
 -128.1212  363.8333  -12.7755
 -124.3821  367.1524  -12.7960
 -120.8750  370.7164  -12.8167
 -117.5849  374.4817  -12.8377
 -114.4738  378.3961  -12.8594
 -111.4727  382.3954  -12.8709
 -108.4708  386.3943  -12.8826
 -105.3083  390.2674  -12.8952
 -101.7621  393.7908  -12.9080
  -97.6130  396.5647  -12.9210
  -92.8679  398.1230  -12.9338
  -87.8761  398.3581  -12.9476
  -82.9351  397.5965  -12.9617
  -78.1452  396.1648  -12.9761
  -73.4626  394.3987  -12.9908
  -68.9781  392.1936  -13.0062
  -64.9446  389.2340  -13.0220
  -61.3831  385.7211  -13.0379
  -58.0980  381.9504  -13.0546
  -54.9498  378.0633  -13.0721
  -51.9164  374.0891  -13.0896
  -48.9744  370.0450  -13.1073
  -46.1040  365.9511  -13.1260
  -43.2887  361.8186  -13.1459
  -40.5216  357.6538  -13.1668
  -37.7966  353.4617  -13.1881
  -35.1085  349.2454  -13.2101
  -32.4539  345.0083  -13.2330
  -29.8289  340.7528  -13.2570
  -27.2309  336.4805  -13.2822
  -24.6579  332.1934  -13.3085
  -22.1077  327.8926  -13.3358
  -19.5792  323.5789  -13.3639
  -17.0714  319.2533  -13.3923
  -14.5833  314.9163  -13.4209
  -12.1138  310.5686  -13.4495
   -9.6624  306.2107  -13.4780
   -7.2282  301.8433  -13.5064
   -4.8107  297.4665  -13.5348
   -2.4099  293.0805  -13.5633
   -0.0256  288.6857  -13.5917
    2.3424  284.2819  -13.6204
    4.6939  279.8693  -13.6491
    7.0289  275.4481  -13.6779
    9.3470  271.0178  -13.7066
   11.6477  266.5785  -13.7350
   13.9304  262.1301  -13.7625
   16.1945  257.6720  -13.7893
   18.4389  253.2039  -13.8158
   20.6624  248.7256  -13.8424
   22.8627  244.2356  -13.8692
   25.0363  239.7328  -13.8961
   27.1801  235.2156  -13.9229
   29.2919  230.6833  -13.9496
   31.3694  226.1355  -13.9763
   33.3943  221.5633  -14.0030
   35.3326  216.9545  -14.0296
   37.1905  212.3121  -14.0561
   38.9487  207.6260  -14.0828
   40.0743  202.7606  -14.1078
   41.1538  197.8809  -14.1318
   42.6059  193.0911  -14.1563
   44.1723  188.3363  -14.1810
   45.6416  183.5565  -14.2056
   47.0214  178.7506  -14.2301
   48.3836  173.9396  -14.2545
   49.7696  169.1356  -14.2788
   51.1607  164.3330  -14.3033
   52.5329  159.5249  -14.3279
   53.8785  154.7093  -14.3521
   55.1984  149.8867  -14.3749
   56.4892  145.0561  -14.3962
   57.7409  140.2154  -14.4173
   58.9431  135.3618  -14.4389
   60.0832  130.4936  -14.4607
   61.1467  125.6075  -14.4822
   62.1128  120.7019  -14.5035
   62.9564  115.7727  -14.5249
   63.6437  110.8200  -14.5467
   64.1274  105.8435  -14.5676
   64.3436  100.8460  -14.5866
   64.2031   95.8466  -14.6046
   63.5817   90.8850  -14.6224
   62.3203   86.0469  -14.6405
   60.2511   81.4961  -14.6583
   57.2894   77.4691  -14.6759
   53.5313   74.1725  -14.6941
   49.2120   71.6538  -14.7122
   44.5564   69.8277  -14.7288
   39.7236   68.5343  -14.7427
   34.7957   67.6389  -14.7562
   29.7786   67.3699  -14.7694
   24.9412   68.5164  -14.7827
   20.9258   71.4975  -14.7961
   18.1796   75.7055  -14.8097
   16.4278   80.4013  -14.8234
   15.3222   85.2755  -14.8340
   14.6330   90.2331  -14.8420
   14.2244   95.2171  -14.8496
   14.0149  100.2137  -14.8576
   13.9448  105.2137  -14.8657
   13.9756  110.2140  -14.8735
   14.0748  115.2131  -14.8801
   14.2194  120.2112  -14.8848
   14.3884  125.2083  -14.8868
   14.5647  130.2052  -14.8876
   14.7323  135.2024  -14.8890
   14.8756  140.2005  -14.8905
   14.9794  145.1993  -14.8900
   15.0272  150.1997  -14.8865
   15.0005  155.1995  -14.8810
   14.8797  160.1988  -14.8749
   14.6411  165.1939  -14.8682
   14.2585  170.1796  -14.8610
   13.6959  175.1507  -14.8519
   12.9122  180.0885  -14.8388
   11.8508  184.9809  -14.8233
   10.4485  189.7803  -14.8087
    8.6159  194.4420  -14.7938
    6.2601  198.8610  -14.7745
    3.2956  202.8829  -14.7515
   -0.3513  206.3507  -14.7273
   -4.5567  209.0325  -14.7043
   -9.2398  210.8753  -14.6802
  -14.1329  211.8532  -14.6498
  -19.1438  212.1944  -14.6163
  -24.1410  212.1564  -14.5845
  -29.1388  211.8893  -14.5519
  -34.1231  211.4935  -14.5150
  -39.0965  210.9712  -14.4752
  -44.0506  210.2943  -14.4356
  -48.9822  209.4680  -14.3954
  -53.8893  208.5057  -14.3534
  -58.7687  207.4148  -14.3093
  -63.6211  206.2068  -14.2639
  -68.4475  204.9011  -14.2192
  -73.2539  203.5231  -14.1732
  -78.0496  202.1082  -14.1254
  -82.8499  200.7090  -14.0776
  -87.6788  199.4109  -14.0298
  -92.5659  198.3514  -13.9816
  -97.5326  197.7781  -13.9333
 -102.5122  198.1245  -13.8854
 -107.1708  199.9152  -13.8368
 -110.9813  203.1448  -13.7882
 -113.8602  207.2309  -13.7403
 -116.0620  211.7197  -13.6933
 -117.8199  216.4002  -13.6464
 -119.2646  221.1884  -13.5995
 -120.4863  226.0372  -13.5526
 -121.6265  230.9064  -13.5067
 -122.8086  235.7652  -13.4621
 -124.1206  240.5895  -13.4181
 -125.5921  245.3691  -13.3242
 -127.2105  250.1001  -13.2304
 -128.9842  254.7750  -13.1856
 -130.9293  259.3826  -13.1416
 -133.0556  263.9077  -13.0997
 -135.3792  268.3357  -13.0592
 -137.9197  272.6439  -13.0180
 -140.6972  276.8015  -12.9767
 -143.7386  280.7699  -12.9360
 -147.0755  284.4946  -12.8946
 -150.7411  287.8979  -12.8509
 -154.7653  290.8678  -12.8065
 -159.1614  293.2508  -12.7621
 -163.8968  294.8524  -12.7149
 -168.8544  295.4735  -12.6573
 -173.8288  295.0028  -12.5996
 -178.5923  293.4866  -12.5400
 -182.9921  291.1092  -12.4690
 -186.9769  288.0839  -12.3954
 -190.5616  284.5942  -12.3189
 -193.7739  280.7643  -12.2320
 -196.7144  276.7190  -12.1368
 -199.4901  272.5589  -12.0371
 -202.1589  268.3305  -11.9296
 -204.7139  264.0328  -11.8102
 -207.1354  259.6576  -11.6780
 -209.4164  255.2078  -11.5365
 -211.5446  250.6835  -11.3845
 -213.5071  246.0844  -11.2180
 -215.2921  241.4130  -11.0322
 -216.8876  236.6745  -10.8281
 -218.2825  231.8729  -10.6056
 -219.4657  227.0137  -10.3637
 -220.4269  222.1067  -10.1010
 -221.1582  217.1607   -9.8178
 -221.6538  212.1843   -9.5156
 -221.9095  207.1899   -9.1984
 -221.9243  202.1902   -8.8728
 -221.6992  197.1947   -8.5457
 -221.2377  192.2147   -8.2228
 -220.5457  187.2631   -7.9087
 -219.6306  182.3469   -7.6096
 -218.5015  177.4748   -7.3462
 -217.1688  172.6561   -7.0970
 -215.6424  167.8933   -6.8698
 -213.9344  163.1939   -6.6842
 -212.0573  158.5595   -6.5448
 -210.0212  153.9914   -6.4481
 -207.8329  149.4963   -6.3844
 -205.5078  145.0685   -6.3437
 -203.0779  140.6989   -6.3163
 -200.5658  136.3752   -6.2930
 -197.9868  132.0916   -6.2503
 -195.3359  127.8522   -6.1948
 -192.6016  123.6656   -6.1182
 -189.7796  119.5382   -6.0122
 -186.8638  115.4763   -5.8779
 -183.8479  111.4878   -5.6873
 -180.7292  107.5797   -5.3286
 -177.5062  103.7571   -4.9481
 -174.1801  100.0237   -4.6848
 -170.7552   96.3806   -4.4831
 -167.2400   92.8248   -4.3267
 -163.6458   89.3490   -4.2081
 -159.9857   85.9426   -4.1198
 -156.2745   82.5919   -4.0542
 -152.5272   79.2815   -4.0039
 -148.7578   75.9965   -3.9613
 -144.9782   72.7232   -3.9196
 -141.1994   69.4489   -3.8760
 -137.4305   66.1632   -3.8297
 -133.6790   62.8578   -3.7800
 -129.9513   59.5255   -3.7260
 -126.2480   56.1661   -3.6670
 -122.5729   52.7757   -3.6020
 -118.9445   49.3356   -3.5304
 -115.3347   45.8757   -3.4513
 -111.6725   42.4701   -3.3639
 -107.8990   39.1899   -3.2673
 -103.9761   36.0882   -3.1609
  -99.9251   33.1571   -3.0438
  -95.7677   30.3765   -2.9151
  -91.5157   27.7466   -2.7742
  -87.1750   25.2621   -2.6247
  -82.7596   22.9167   -2.4747
  -78.2754   20.7028   -2.3261
  -73.7315   18.6163   -2.1767
  -69.1336   16.6514   -2.0267
  -64.4873   14.8029   -1.8765
  -59.7987   13.0663   -1.7262
  -55.0711   11.4367   -1.5755
  -50.3098    9.9103   -1.4242
  -45.5176    8.4837   -1.2726
  -40.6972    7.1544   -1.1210
  -35.8522    5.9195   -0.9687
  -30.9844    4.7770   -0.8160
  -26.0960    3.7258   -0.6633
  -21.1889    2.7664   -0.5099
  -16.2646    1.8995   -0.3555
  -11.3244    1.1288   -0.2036
   -6.3688    0.4638   -0.0471
   -1.3969   -0.0630    0.0542
    3.5712   -0.5000    0.0541
];

params.course(306,1)=params.course(306,1)+0.5;  %% Small correction to iron out wrinkle
params.course(306,2)=params.course(306,2)+0.137;

%norm(params.course(306,1:2)-params.course(305,1:2))

params.course(307:end,1)=params.course(307:end,1)+1;
params.course(307:end,2)=params.course(307:end,2)+0.2727;

%norm(params.course(307,1:2)-params.course(306,1:2))

%params.course=[5*[0:1:200]' zeros(201,1)  zeros(201,1)];
%params.course(20:101,2)=5*ones(82,1);

%  theta=-pi/2:asin(2.5/100):3*pi/2;
%  params.course=[100*cos(theta)' 100*sin(theta)'+100 zeros(size(theta))'];


% filename=['track.out'];
% temp=params.course(:,1:2);
% save(filename,'temp','-ascii','-double');

% compute some run off
for i=1:10
	params.course(end+1,:)=2*params.course(end,:)-params.course(end-1,:);
end

% offset zdata, save it
params.course(:,10)=params.course(:,3);

% find s data
params.course(1,3)=0;
for i=2:length(params.course)
	params.course(i,3)=params.course(i-1,3)+norm(params.course(i,1:2)-params.course(i-1,1:2));
end

% use arctan to find heading angle of each segment
params.course(end,5)=0;
params.course(1:end-1,5)=atan2(diff(params.course(:,2)),diff(params.course(:,1)));

% figure(90)
% plot(params.course(:,1),params.course(:,2))
% 
% figure(91)
% plot(params.course(:,3))
% 
% figure(100)
% plot(params.course(:,3),params.course(:,5))
% 
% figure(102)
% plot(params.course(:,3),params.course(:,5))

params.course(1,4)=0;%  Use the change in heading to find the curvature (dtheta/ds)
params.course(2:end,4)=diff(params.course(:,5))/5;%  Divide by 5, as ds=5 

% figure(102)
% plot(params.course(:,3),params.course(:,4))

skip_up=find(params.course(:,4)>1);  % Look for and remove any abrupt change when we hit -pi -> pi

for i=1:length(skip_up)
	params.course(skip_up(i):end,5)=params.course(skip_up(i):end,5)-2*pi;
end

skip_down=find(params.course(:,4)<-1);
for i=1:length(skip_down)
	params.course(skip_down(i):end,5)=params.course(skip_down(i):end,5)+2*pi;
end

params.course(1,4)=0;  %% Find the curvature from the change in angle, corrected for gaps
params.course(2:end,4)=diff(params.course(:,5))/5;

% figure(101)
% plot(params.course(:,3),params.course(:,5));
% 
% figure(101)
% plot(params.course(:,3),params.course(:,4));
% 
% error('sfdssdf')

params.course(:,6)=sqrt((params.acc_lat_max*params.g)./abs(params.course(:,4)));  %% Find target speed 
params.course((params.course(:,6)>params.maxv),6)=params.maxv;

params.course(:,7)=[diff(params.course(:,6))/5;0];  %% Find dv/ds, divide by 5 because that's the ds.  Make this better!!!

params.course(:,8)=params.course(:,6).*params.course(:,7);  %% v * dv/ds = a

for i= length(params.course)-1 :-1:1
	temp=sqrt(params.course(i+1,6)^2+2*5*params.acc_brake_max*params.g);  %% 2ad, d=5
	if(params.course(i,6)>temp)  %% Look for areas where a is too big, adjust target v in previous s as necessary
		params.course(i,6)=temp;
	end
	params.course(i,7)= (params.course(i+1,6)-params.course(i,6))/5;
	params.course(i,8)=params.course(i,6)*params.course(i,7);
end

for i= 1:length(params.course)-1
	temp=sqrt(params.course(i,6)^2+2*5*params.acc_drive_max*params.g);  %% 2ad, d=5
	if(params.course(i+1,6)>temp)
		params.course(i+1,6)=temp;
	end
	params.course(i,7)= (params.course(i+1,6)-params.course(i,6))/5;
	params.course(i,8)=params.course(i,6)*params.course(i,7);
end

[B,A]=butter(6,0.3);
params.course(:,6)=filtfilt(B,A,params.course(:,6));  %% Filter noise from calc, forward backward to avoid time shifts

end  %% Leave
